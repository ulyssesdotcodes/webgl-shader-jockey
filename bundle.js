(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\Ulysses\\Development\\webgl-shader-jockey\\coffee\\Main.coffee":[function(require,module,exports){
window.SJ = {};

require('./Viewer.coffee');

SJ.Main = (function() {
  function Main(isVisualizer) {
    var canvas, getShader;
    this.startTime = Date.now();
    this.surface = {
      height: 1.0,
      width: 1.0
    };
    canvas = document.createElement("canvas");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    document.body.appendChild(canvas);
    this.gl = canvas.getContext("experimental-webgl");
    this.buffer = this.gl.createBuffer();
    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);
    this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0]), this.gl.STATIC_DRAW);
    this.surface.buffer = this.gl.createBuffer();
    this.gl.viewport(0, 0, canvas.clientWidth, canvas.clientHeight);
    this.gl.clearColor(0, 0, 0, 1);
    this.gl.enable(this.gl.DEPTH_TEST);
    getShader = function(name) {
      return Rx.DOM.Request.get('./shaders/' + name);
    };
    Rx.Observable.start((function(_this) {
      return function() {
        return _this.gl.createProgram();
      };
    })(this)).doOnNext((function(_this) {
      return function(program) {
        return _this.program = program;
      };
    })(this)).zip(getShader("simple.vert").map((function(_this) {
      return function(data) {
        return _this.createShader(_this.gl.VERTEX_SHADER, data.responseText);
      };
    })(this)), getShader("simple.frag").map((function(_this) {
      return function(data) {
        return _this.createShader(_this.gl.FRAGMENT_SHADER, data.responseText);
      };
    })(this)), function(program, vs, fs) {
      return {
        program: program,
        vs: vs,
        fs: fs
      };
    }).subscribe((function(_this) {
      return function(_arg) {
        var fs, program, vs;
        program = _arg.program, vs = _arg.vs, fs = _arg.fs;
        _this.gl.attachShader(program, vs);
        _this.gl.attachShader(program, fs);
        _this.gl.deleteShader(vs);
        _this.gl.deleteShader(fs);
        _this.gl.linkProgram(program);
        _this.gl.useProgram(program);
        _this.cacheUniformLocation(program, 'time');
        _this.vertexPosition = _this.gl.getAttribLocation(_this.program, "position");
        _this.gl.enableVertexAttribArray(_this.vertexPosition);
        return _this.animate();
      };
    })(this));
  }

  Main.prototype.cacheUniformLocation = function(program, label) {
    if (program.uniformsCache === void 0) {
      program.uniformsCache = {};
    }
    return program.uniformsCache[label] = this.gl.getUniformLocation(program, label);
  };

  Main.prototype.animate = function() {
    requestAnimationFrame((function(_this) {
      return function() {
        return _this.animate();
      };
    })(this));
    return this.render();
  };

  Main.prototype.createShader = function(type, text) {
    var shader;
    shader = this.gl.createShader(type);
    this.gl.shaderSource(shader, text);
    this.gl.compileShader(shader);
    if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {
      throw this.gl.getShaderInfoLog(shader);
    }
    return shader;
  };

  Main.prototype.createTarget = function(gl, width, height) {
    var target;
    this.gl = gl;
    target = {};
    target.framebuffer = this.gl.createFramebuffer();
    target.renderbuffer = this.gl.createRenderbuffer();
    target.texture = this.gl.createTexture();
    this.gl.bindTexture(this.gl.TEXTURE_2D, target.texture);
    this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, width, height, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);
    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, target.framebuffer);
    this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, target.texture, 0);
    this.gl.bindRenderbuffer(this.gl.RENDERBUFFER, target.renderbuffer);
    this.gl.renderbufferStorage(this.gl.RENDERBUFFER, this.gl.DEPTH_COMPONENT16, width, height);
    this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER, this.gl.DEPTH_ATTACHMENT, this.gl.RENDERBUFFER, target.renderbuffer);
    this.gl.bindTexture(this.gl.TEXTURE_2D, null);
    this.gl.bindRenderbuffer(this.gl.RENDERBUFFER, null);
    return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);
  };

  Main.prototype.render = function() {
    this.gl.useProgram(this.program);
    this.gl.uniform1f(this.program.uniformsCache['time'], (Date.now() - this.startTime) / 1000.0);
    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);
    this.gl.vertexAttribPointer(this.vertexPosition, 2, this.gl.FLOAT, false, 0, 0);
    this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);
    return this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);
  };

  return Main;

})();



},{"./Viewer.coffee":"C:\\Users\\Ulysses\\Development\\webgl-shader-jockey\\coffee\\Viewer.coffee"}],"C:\\Users\\Ulysses\\Development\\webgl-shader-jockey\\coffee\\Viewer.coffee":[function(require,module,exports){
SJ.Viewer = (function() {
  function Viewer() {
    return;
  }

  return Viewer;

})();



},{}]},{},["C:\\Users\\Ulysses\\Development\\webgl-shader-jockey\\coffee\\Main.coffee"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFxQcm9ncmFtRGF0YVxcY2hvY29sYXRleVxcbGliXFxub2RlanMuY29tbWFuZGxpbmUuMC4xMC4zM1xcdG9vbHNcXG5vZGVfbW9kdWxlc1xcd2F0Y2hpZnlcXG5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwiQzpcXFVzZXJzXFxVbHlzc2VzXFxEZXZlbG9wbWVudFxcd2ViZ2wtc2hhZGVyLWpvY2tleVxcY29mZmVlXFxNYWluLmNvZmZlZSIsIkM6XFxVc2Vyc1xcVWx5c3Nlc1xcRGV2ZWxvcG1lbnRcXHdlYmdsLXNoYWRlci1qb2NrZXlcXGNvZmZlZVxcVmlld2VyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLE1BQU0sQ0FBQyxFQUFQLEdBQVksRUFBWixDQUFBOztBQUFBLE9BRUEsQ0FBUSxpQkFBUixDQUZBLENBQUE7O0FBQUEsRUFJUSxDQUFDO0FBQ00sRUFBQSxjQUFDLFlBQUQsR0FBQTtBQUNYLFFBQUEsaUJBQUE7QUFBQSxJQUFBLElBQUMsQ0FBQSxTQUFELEdBQWEsSUFBSSxDQUFDLEdBQUwsQ0FBQSxDQUFiLENBQUE7QUFBQSxJQUNBLElBQUMsQ0FBQSxPQUFELEdBQVc7QUFBQSxNQUFDLE1BQUEsRUFBUSxHQUFUO0FBQUEsTUFBYyxLQUFBLEVBQU8sR0FBckI7S0FEWCxDQUFBO0FBQUEsSUFFQSxNQUFBLEdBQVMsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsUUFBdkIsQ0FGVCxDQUFBO0FBQUEsSUFHQSxNQUFNLENBQUMsS0FBUCxHQUFlLE1BQU0sQ0FBQyxVQUh0QixDQUFBO0FBQUEsSUFJQSxNQUFNLENBQUMsTUFBUCxHQUFnQixNQUFNLENBQUMsV0FKdkIsQ0FBQTtBQUFBLElBTUEsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFkLENBQTBCLE1BQTFCLENBTkEsQ0FBQTtBQUFBLElBUUEsSUFBQyxDQUFBLEVBQUQsR0FB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QWxFLENBUkEsQ0FBQTtBQUFBLElBV0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxLQUFKLENBQVUsSUFBQyxDQUFBLEVBQUUsQ0FBQyxnQkFBSixHQUF1QixJQUFDLENBQUEsRUFBRSxDQUFDLGdCQUFyQyxDQVhBLENBQUE7V0FZQSxJQUFDLENBQUEsRUFBRSxDQUFDLFVBQUosQ0FBZSxJQUFDLENBQUEsRUFBRSxDQUFDLFNBQW5CLEVBQThCLENBQTlCLEVBQWlDLENBQWpDLEVBYk07RUFBQSxDQTVHUixDQUFBOztjQUFBOztJQUxGLENBQUE7Ozs7O0FDQUEsRUFBUSxDQUFDO0FBQ00sRUFBQSxnQkFBQSxHQUFBO0FBQ1gsVUFBQSxDQURXO0VBQUEsQ0FBYjs7Z0JBQUE7O0lBREYsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ3aW5kb3cuU0ogPSB7fVxyXG5cclxucmVxdWlyZSAnLi9WaWV3ZXIuY29mZmVlJ1xyXG5cclxuY2xhc3MgU0ouTWFpblxyXG4gIGNvbnN0cnVjdG9yOiAoaXNWaXN1YWxpemVyKSAtPlxyXG4gICAgQHN0YXJ0VGltZSA9IERhdGUubm93KClcclxuICAgIEBzdXJmYWNlID0ge2hlaWdodDogMS4wLCB3aWR0aDogMS4wfVxyXG4gICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKVxyXG4gICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGhcclxuICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHRcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkIGNhbnZhc1xyXG5cclxuICAgIEBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIpXHJcbiAgICBAYnVmZmVyID0gQGdsLmNyZWF0ZUJ1ZmZlcigpXHJcbiAgICBAZ2wuYmluZEJ1ZmZlciBAZ2wuQVJSQVlfQlVGRkVSLCBAYnVmZmVyXHJcbiAgICBAZ2wuYnVmZmVyRGF0YSBAZ2wuQVJSQVlfQlVGRkVSXHJcbiAgICAgICAgLCBuZXcgRmxvYXQzMkFycmF5KFsgLTEuMCwgLTEuMCwgMS4wLCAtMS4wLFxyXG4gICAgICAgIC0xLjAsIDEuMCwgMS4wLCAtMS4wLFxyXG4gICAgICAgIDEuMCwgMS4wLCAtIDEuMCwgMS4wXSlcclxuICAgICAgICAsIEBnbC5TVEFUSUNfRFJBV1xyXG4gICAgQHN1cmZhY2UuYnVmZmVyID0gQGdsLmNyZWF0ZUJ1ZmZlcigpXHJcblxyXG4gICAgQGdsLnZpZXdwb3J0KDAsIDAsIGNhbnZhcy5jbGllbnRXaWR0aCwgY2FudmFzLmNsaWVudEhlaWdodClcclxuICAgIEBnbC5jbGVhckNvbG9yKDAsIDAsIDAsIDEpXHJcbiAgICBAZ2wuZW5hYmxlKEBnbC5ERVBUSF9URVNUKVxyXG5cclxuICAgIGdldFNoYWRlciA9IChuYW1lKSAtPlxyXG4gICAgICByZXR1cm4gUnguRE9NLlJlcXVlc3QuZ2V0KCcuL3NoYWRlcnMvJyArIG5hbWUpXHJcblxyXG5cclxuICAgICMgc2hhZGVycyBoZXJlXHJcbiAgICBcclxuICAgIFJ4Lk9ic2VydmFibGUuc3RhcnQoKCkgPT4gQGdsLmNyZWF0ZVByb2dyYW0oKSlcclxuICAgICAgLmRvT25OZXh0IChwcm9ncmFtKSA9PlxyXG4gICAgICAgIEBwcm9ncmFtID0gcHJvZ3JhbVxyXG4gICAgICAuemlwIFxcXHJcbiAgICAgICAgZ2V0U2hhZGVyKFwic2ltcGxlLnZlcnRcIikgXFxcclxuICAgICAgICAgIC5tYXAoKGRhdGEpID0+IEBjcmVhdGVTaGFkZXIoQGdsLlZFUlRFWF9TSEFERVIsIGRhdGEucmVzcG9uc2VUZXh0KSlcclxuICAgICAgLCBnZXRTaGFkZXIoXCJzaW1wbGUuZnJhZ1wiKSBcXFxyXG4gICAgICAgICAgLm1hcCgoZGF0YSkgPT4gQGNyZWF0ZVNoYWRlcihAZ2wuRlJBR01FTlRfU0hBREVSLCBkYXRhLnJlc3BvbnNlVGV4dCkpXHJcbiAgICAgICwgKHByb2dyYW0sIHZzLCBmcykgLT4gcmV0dXJuIHsgcHJvZ3JhbTogcHJvZ3JhbSwgdnM6IHZzLCBmczogZnMgfVxyXG4gICAgICAuc3Vic2NyaWJlICh7cHJvZ3JhbSwgdnMsIGZzfSkgPT5cclxuICAgICAgICBAZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZzKVxyXG4gICAgICAgIEBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnMpXHJcblxyXG4gICAgICAgIEBnbC5kZWxldGVTaGFkZXIodnMpXHJcbiAgICAgICAgQGdsLmRlbGV0ZVNoYWRlcihmcylcclxuXHJcbiAgICAgICAgQGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pXHJcblxyXG4gICAgICAgIEBnbC51c2VQcm9ncmFtKHByb2dyYW0pXHJcblxyXG4gICAgICAgIEBjYWNoZVVuaWZvcm1Mb2NhdGlvbiBwcm9ncmFtLCAndGltZSdcclxuICAgICAgICBcclxuICAgICAgICAjQHN1cmZhY2UucG9zaXRpb25BdHRyaWJ1dGUgPSBAZ2wuZ2V0QXR0cmliTG9jYXRpb24gQHByb2dyYW0sIFwic3VyZmFjZVBvc0F0dHJpYlwiXHJcbiAgICAgICAgI0BnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSBAdmVydGV4UG9zaXRpb25cclxuXHJcbiAgICAgICAgQHZlcnRleFBvc2l0aW9uID0gQGdsLmdldEF0dHJpYkxvY2F0aW9uIEBwcm9ncmFtLCBcInBvc2l0aW9uXCJcclxuICAgICAgICBAZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkgQHZlcnRleFBvc2l0aW9uXHJcbiAgICAgICAgI0BnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyIEB2ZXJ0ZXhQb3NpdGlvbiwgMiwgQGdsLkZMT0FULCBmYWxzZSBcclxuXHJcbiAgICAgICAgQGFuaW1hdGUoKVxyXG5cclxuXHJcbiAgY2FjaGVVbmlmb3JtTG9jYXRpb246IChwcm9ncmFtLCBsYWJlbCkgLT5cclxuICAgIGlmIHByb2dyYW0udW5pZm9ybXNDYWNoZSA9PSB1bmRlZmluZWRcclxuICAgICAgcHJvZ3JhbS51bmlmb3Jtc0NhY2hlID0ge31cclxuXHJcbiAgICBwcm9ncmFtLnVuaWZvcm1zQ2FjaGVbbGFiZWxdID0gQGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBsYWJlbClcclxuXHJcbiAgYW5pbWF0ZTogKCkgLT5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBAYW5pbWF0ZSgpKVxyXG4gICAgQHJlbmRlcigpXHJcblxyXG4gIGNyZWF0ZVNoYWRlcjogKHR5cGUsIHRleHQpIC0+XHJcbiAgICBzaGFkZXIgPSBAZ2wuY3JlYXRlU2hhZGVyKHR5cGUpXHJcbiAgICBAZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgdGV4dClcclxuICAgIEBnbC5jb21waWxlU2hhZGVyKHNoYWRlcilcclxuICAgIGlmICghQGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIEBnbC5DT01QSUxFX1NUQVRVUykpXHJcbiAgICAgIHRocm93IEBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcilcclxuICAgIHJldHVybiBzaGFkZXJcclxuXHJcbiAgY3JlYXRlVGFyZ2V0OiAoQGdsLCB3aWR0aCwgaGVpZ2h0KSAtPlxyXG4gICAgdGFyZ2V0ID0ge31cclxuXHJcbiAgICB0YXJnZXQuZnJhbWVidWZmZXIgPSBAZ2wuY3JlYXRlRnJhbWVidWZmZXIoKVxyXG4gICAgdGFyZ2V0LnJlbmRlcmJ1ZmZlciA9IEBnbC5jcmVhdGVSZW5kZXJidWZmZXIoKVxyXG4gICAgdGFyZ2V0LnRleHR1cmUgPSBAZ2wuY3JlYXRlVGV4dHVyZSgpXHJcblxyXG4gICAgQGdsLmJpbmRUZXh0dXJlKCBAZ2wuVEVYVFVSRV8yRCwgdGFyZ2V0LnRleHR1cmUgKVxyXG4gICAgQGdsLnRleEltYWdlMkQoIEBnbC5URVhUVVJFXzJELCAwLCBAZ2wuUkdCQSwgd2lkdGgsIGhlaWdodCwgMCwgQGdsLlJHQkEsIEBnbC5VTlNJR05FRF9CWVRFLCBudWxsIClcclxuXHJcbiAgICBAZ2wudGV4UGFyYW1ldGVyaSggQGdsLlRFWFRVUkVfMkQsIEBnbC5URVhUVVJFX1dSQVBfUywgQGdsLkNMQU1QX1RPX0VER0UgKVxyXG4gICAgQGdsLnRleFBhcmFtZXRlcmkoIEBnbC5URVhUVVJFXzJELCBAZ2wuVEVYVFVSRV9XUkFQX1QsIEBnbC5DTEFNUF9UT19FREdFIClcclxuXHJcbiAgICBAZ2wudGV4UGFyYW1ldGVyaSggQGdsLlRFWFRVUkVfMkQsIEBnbC5URVhUVVJFX01BR19GSUxURVIsIEBnbC5ORUFSRVNUIClcclxuICAgIEBnbC50ZXhQYXJhbWV0ZXJpKCBAZ2wuVEVYVFVSRV8yRCwgQGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgQGdsLk5FQVJFU1QgKVxyXG5cclxuICAgIEBnbC5iaW5kRnJhbWVidWZmZXIoIEBnbC5GUkFNRUJVRkZFUiwgdGFyZ2V0LmZyYW1lYnVmZmVyIClcclxuICAgIEBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRCggQGdsLkZSQU1FQlVGRkVSLCBAZ2wuQ09MT1JfQVRUQUNITUVOVDAsIEBnbC5URVhUVVJFXzJELCB0YXJnZXQudGV4dHVyZSwgMCApXHJcblxyXG4gICAgQGdsLmJpbmRSZW5kZXJidWZmZXIoIEBnbC5SRU5ERVJCVUZGRVIsIHRhcmdldC5yZW5kZXJidWZmZXIgKVxyXG5cclxuICAgIEBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKCBAZ2wuUkVOREVSQlVGRkVSLCBAZ2wuREVQVEhfQ09NUE9ORU5UMTYsIHdpZHRoLCBoZWlnaHQgKVxyXG4gICAgQGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKCBAZ2wuRlJBTUVCVUZGRVIsIEBnbC5ERVBUSF9BVFRBQ0hNRU5ULCBAZ2wuUkVOREVSQlVGRkVSLCB0YXJnZXQucmVuZGVyYnVmZmVyIClcclxuXHJcblxyXG4gICAgQGdsLmJpbmRUZXh0dXJlKCBAZ2wuVEVYVFVSRV8yRCwgbnVsbCApXHJcbiAgICBAZ2wuYmluZFJlbmRlcmJ1ZmZlciggQGdsLlJFTkRFUkJVRkZFUiwgbnVsbCApXHJcbiAgICBAZ2wuYmluZEZyYW1lYnVmZmVyKCBAZ2wuRlJBTUVCVUZGRVIsIG51bGwpXHJcblxyXG4gIHJlbmRlcjogKCkgLT5cclxuICAgIEBnbC51c2VQcm9ncmFtIEBwcm9ncmFtXHJcbiAgICBcclxuICAgIEBnbC51bmlmb3JtMWYgQHByb2dyYW0udW5pZm9ybXNDYWNoZVsndGltZSddLCAoRGF0ZS5ub3coKSAtIEBzdGFydFRpbWUpIC8gMTAwMC4wXHJcblxyXG4gICAgI0BnbC5iaW5kQnVmZmVyIEBnbC5BUlJBWV9CVUZGRVIsIEBzdXJmYWNlLmJ1ZmZlclxyXG4gICAgI0BnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyIHN1cmZhY2UucG9zaXRpb25BdHRyaWJ1dGUsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMFxyXG4gICAgXHJcbiAgICBAZ2wuYmluZEJ1ZmZlciBAZ2wuQVJSQVlfQlVGRkVSLCBAYnVmZmVyXHJcbiAgICBAZ2wudmVydGV4QXR0cmliUG9pbnRlciggQHZlcnRleFBvc2l0aW9uLCAyLCBAZ2wuRkxPQVQsIGZhbHNlLCAwLCAwICk7XHJcblxyXG5cclxuICAgIEBnbC5jbGVhcihAZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IEBnbC5ERVBUSF9CVUZGRVJfQklUKVxyXG4gICAgQGdsLmRyYXdBcnJheXMoQGdsLlRSSUFOR0xFUywgMCwgNilcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiY2xhc3MgU0ouVmlld2VyXHJcbiAgY29uc3RydWN0b3I6ICgpIC0+XHJcbiAgICByZXR1cm5cclxuIl19
